/****************************************************************************\

	NES Emulator
	Copyright (C) 2012-2013  Ivanov Viktor

	This program is free software; you can redistribute it and/or modify
	it under the terms of the GNU General Public License as published by
	the Free Software Foundation; either version 2 of the License, or
	(at your option) any later version.

	This program is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU General Public License for more details.

	You should have received a copy of the GNU General Public License along
	with this program; if not, write to the Free Software Foundation, Inc.,
	51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.

\****************************************************************************/

#include "aputables.h"

namespace vpnes {

namespace apu {

/* Таблица выхода прямоугольных сигналов */
const double SquareTable[31] = {
	0.0000000, 0.0116091, 0.0229395, 0.0340009, 0.0448030, 0.0553547,
	0.0656645, 0.0757408, 0.0855914, 0.0952237, 0.1046450, 0.1138620,
	0.1228820, 0.1317100, 0.1403530, 0.1488160, 0.1571050, 0.1652260,
	0.1731830, 0.1809810, 0.1886260, 0.1961200, 0.2034700, 0.2106790,
	0.2177510, 0.2246890, 0.2314990, 0.2381820, 0.2447440, 0.2511860,
	0.2575130
};

/* Таблица выхода остальных каналов */
const double TNDTable[203] = {
	0.00000000, 0.00669982, 0.01334500, 0.01993630, 0.02647420, 0.03295940,
	0.03939270, 0.04577450, 0.05210550, 0.05838640, 0.06461760, 0.07079990,
	0.07693370, 0.08301960, 0.08905830, 0.09505010, 0.10099600, 0.10689600,
	0.11275100, 0.11856100, 0.12432700, 0.13004900, 0.13572800, 0.14136500,
	0.14695900, 0.15251200, 0.15802400, 0.16349400, 0.16892500, 0.17431500,
	0.17966600, 0.18497800, 0.19025200, 0.19548700, 0.20068400, 0.20584500,
	0.21096800, 0.21605400, 0.22110500, 0.22612000, 0.23109900, 0.23604300,
	0.24095300, 0.24582800, 0.25066900, 0.25547700, 0.26025200, 0.26499300,
	0.26970200, 0.27437900, 0.27902400, 0.28363800, 0.28822000, 0.29277100,
	0.29729200, 0.30178200, 0.30624200, 0.31067300, 0.31507400, 0.31944600,
	0.32378900, 0.32810400, 0.33239000, 0.33664900, 0.34087900, 0.34508300,
	0.34925900, 0.35340800, 0.35753000, 0.36162600, 0.36569600, 0.36974000,
	0.37375900, 0.37775200, 0.38172000, 0.38566200, 0.38958100, 0.39347400,
	0.39734400, 0.40118900, 0.40501100, 0.40880900, 0.41258400, 0.41633500,
	0.42006400, 0.42377000, 0.42745400, 0.43111500, 0.43475400, 0.43837100,
	0.44196600, 0.44554000, 0.44909300, 0.45262500, 0.45613500, 0.45962500,
	0.46309400, 0.46654300, 0.46997200, 0.47338000, 0.47676900, 0.48013800,
	0.48348800, 0.48681800, 0.49012900, 0.49342100, 0.49669400, 0.49994800,
	0.50318400, 0.50640200, 0.50960100, 0.51278200, 0.51594600, 0.51909100,
	0.52221900, 0.52533000, 0.52842300, 0.53149900, 0.53455800, 0.53760100,
	0.54062600, 0.54363500, 0.54662700, 0.54960300, 0.55256300, 0.55550700,
	0.55843400, 0.56134600, 0.56424300, 0.56712300, 0.56998800, 0.57283800,
	0.57567300, 0.57849300, 0.58129800, 0.58408800, 0.58686300, 0.58962300,
	0.59237000, 0.59510100, 0.59781900, 0.60052200, 0.60321200, 0.60588700,
	0.60854900, 0.61119700, 0.61383100, 0.61645200, 0.61905900, 0.62165300,
	0.62423400, 0.62680200, 0.62935700, 0.63189900, 0.63442800, 0.63694400,
	0.63944800, 0.64193900, 0.64441800, 0.64688500, 0.64933900, 0.65178100,
	0.65421200, 0.65663000, 0.65903600, 0.66143100, 0.66381300, 0.66618500,
	0.66854400, 0.67089300, 0.67322900, 0.67555500, 0.67786900, 0.68017300,
	0.68246500, 0.68474600, 0.68701700, 0.68927600, 0.69152500, 0.69376300,
	0.69599100, 0.69820800, 0.70041500, 0.70261100, 0.70479700, 0.70697300,
	0.70913900, 0.71129400, 0.71344000, 0.71557600, 0.71770200, 0.71981800,
	0.72192400, 0.72402100, 0.72610800, 0.72818600, 0.73025400, 0.73231300,
	0.73436200, 0.73640200, 0.73843300, 0.74045500, 0.74246800
};

/* NTSC */

/* Число тактов для каждого шага */
const int NTSC_Tables::StepCycles[6] = {7456, 14912, 22370, 29828, 37280, 0};

/* Таблица счетчика */
const int NTSC_Tables::LengthCounterTable[32] = {
	0x0a, 0xfe, 0x14, 0x02, 0x28, 0x04, 0x50, 0x06, 0xa0, 0x08, 0x3c, 0x0a,
	0x0e, 0x0c, 0x1a, 0x0e, 0x0c, 0x10, 0x18, 0x12, 0x30, 0x14, 0x60, 0x16,
	0xc0, 0x18, 0x48, 0x1a, 0x10, 0x1c, 0x20, 0x1e
};

/* Таблица формы */
const bool NTSC_Tables::DutyTable[32] = {
	false, true,  false, false, false, false, false, false, false, true,  true,  false,
	false, false, false, false, false, true,  true,  true,  true,  false, false, false,
	true,  false, false, true,  true,  true,  true,  true
};

/* Таблица пилообразной формы */
const int NTSC_Tables::SeqTable[32] = {
	15, 14, 13, 12, 11, 10,  9,  8,  7,  6,  5,  4,  3,  2,  1,  0,
	 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15
};

/* Таблица длин для канала шума */
const int NTSC_Tables::NoiseTable[16] = {
	0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0060, 0x0080, 0x00a0,
	0x00ca, 0x00fe, 0x017c, 0x01fc, 0x02fa, 0x03f8, 0x07f2, 0x0fe4
};

/* Таблица длин для ДМ-канала */
const int NTSC_Tables::DMTable[16] = {
	428, 380, 340, 320, 286, 254, 226, 214,
	190, 160, 142, 128, 106,  84,  72,  54
};

/* PAL */

/* Число тактов для каждого шага */
const int PAL_Tables::StepCycles[6] = {8312, 16626, 24938, 33252, 41564, 0};

/* Таблица длин для канала шума */
const int PAL_Tables::NoiseTable[16] = {
	0x0004, 0x0007, 0x000e, 0x001e, 0x003c, 0x0058, 0x0076, 0x0094,
	0x00bc, 0x00ec, 0x0162, 0x01d8, 0x02c4, 0x03b0, 0x0762, 0x0ec2
};

/* Таблица длин для ДМ-канала */
const int PAL_Tables::DMTable[16] = {
	398, 354, 316, 298, 276, 236, 210, 198,
	176, 148, 132, 118,  98,  78,  66,  50
};

}

}
